(function(){"use strict";try{if(typeof document<"u"){var o=document.createElement("style");o.appendChild(document.createTextNode(".tabs-container{color:#1f2328}.tabs-wrapper{display:flex;align-items:center;justify-content:space-between;gap:5px;margin-bottom:10px}.tabs-bar{display:flex;gap:10px}.tab{cursor:pointer;font-size:14px;text-decoration:none;padding:5px 7px;border-radius:.375rem;transition:background-color .2s}.tab:hover,.tab.active{background-color:#818b981a}.tab-content{margin-top:8px}.gh-btn{background-color:#2da44e;color:#fff;font-weight:500;border:1px solid rgba(27,31,36,.15);border-radius:6px;padding:6px 12px;font-size:14px;line-height:20px;cursor:pointer;display:inline-block;text-align:center;width:100%;transition:background-color .2s ease}.gh-btn:hover{background-color:#218739}.gh-btn.danger{background-color:#d73a49}.gh-btn.danger:hover{background-color:#cb2431}.gh-input{width:100%;padding:6px 8px;font-size:14px;border:1px solid #d0d7de;border-radius:6px;box-shadow:inset 0 1px #d0d7de33;font-family:inherit;margin-bottom:8px;outline:none;box-sizing:border-box}.gh-input:focus{border-color:#0969da;box-shadow:0 0 0 2px #0969da4d}.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content{background-color:#fff;padding:20px;border-radius:8px;max-width:400px;width:90%;box-shadow:0 2px 10px #0000001a}.modal-title{margin:0 0 10px;font-size:1.2em}.modal-message{margin:0 0 20px;color:#333}.modal-actions{display:flex;justify-content:flex-end;gap:10px}.tracked-list{padding:4px 0;font-size:14px}.tracked-entry:not(:last-child){border-bottom:1px solid #ccc;margin-bottom:10px;padding-bottom:7px}.tracked-title{line-height:145%}.tracked-meta{font-size:13px;color:#555;margin-top:5px}.tracked-meta a{color:#0969da;text-decoration:none}.tracked-meta a:hover{text-decoration:underline}.startTrackingBtn{color:#007bff;cursor:pointer}.startTrackingBtn:hover{text-decoration:underline}.search-bar{margin:15px 0 10px}.search-bar input{width:100%;padding:8px 12px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;font-size:1em}*{margin:0;padding:0;box-sizing:border-box}.clearTrackedTimesBtn{font-size:13px;cursor:pointer}.clearTrackedTimesBtn:hover{text-decoration:underline}.popup{padding:15px;box-sizing:border-box;font-family:sans-serif;width:400px}")),document.head.appendChild(o)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
var Z,y,be,$,me,Ae,Ee,Ne,_e,se,ie,G={},Ue=[],Oe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ee=Array.isArray;function U(t,e){for(var n in e)t[n]=e[n];return t}function le(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function je(t,e,n){var r,s,i,a={};for(i in e)i=="key"?r=e[i]:i=="ref"?s=e[i]:a[i]=e[i];if(arguments.length>2&&(a.children=arguments.length>3?Z.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)a[i]==null&&(a[i]=t.defaultProps[i]);return K(t,a,r,s,null)}function K(t,e,n,r,s){var i={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++be,__i:-1,__u:0};return s==null&&y.vnode!=null&&y.vnode(i),i}function M(t){return t.children}function q(t,e){this.props=t,this.context=e}function D(t,e){if(e==null)return t.__?D(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?D(t):null}function $e(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return $e(t)}}function he(t){(!t.__d&&(t.__d=!0)&&$.push(t)&&!Y.__r++||me!=y.debounceRendering)&&((me=y.debounceRendering)||Ae)(Y)}function Y(){for(var t,e,n,r,s,i,a,l=1;$.length;)$.length>l&&$.sort(Ee),t=$.shift(),l=$.length,t.__d&&(n=void 0,s=(r=(e=t).__v).__e,i=[],a=[],e.__P&&((n=U({},r)).__v=r.__v+1,y.vnode&&y.vnode(n),ce(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[s]:null,i,s??D(r),!!(32&r.__u),a),n.__v=r.__v,n.__.__k[n.__i]=n,De(i,n,a),n.__e!=s&&$e(n)));Y.__r=0}function Me(t,e,n,r,s,i,a,l,u,_,f){var o,d,c,m,S,w,T=r&&r.__k||Ue,v=e.length;for(u=Ke(n,e,T,u,v),o=0;o<v;o++)(c=n.__k[o])!=null&&(d=c.__i==-1?G:T[c.__i]||G,c.__i=o,w=ce(t,c,d,s,i,a,l,u,_,f),m=c.__e,c.ref&&d.ref!=c.ref&&(d.ref&&ue(d.ref,null,c),f.push(c.ref,c.__c||m,c)),S==null&&m!=null&&(S=m),4&c.__u||d.__k===c.__k?u=He(c,u,t):typeof c.type=="function"&&w!==void 0?u=w:m&&(u=m.nextSibling),c.__u&=-7);return n.__e=S,u}function Ke(t,e,n,r,s){var i,a,l,u,_,f=n.length,o=f,d=0;for(t.__k=new Array(s),i=0;i<s;i++)(a=e[i])!=null&&typeof a!="boolean"&&typeof a!="function"?(u=i+d,(a=t.__k[i]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?K(null,a,null,null,null):ee(a)?K(M,{children:a},null,null,null):a.constructor==null&&a.__b>0?K(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=t,a.__b=t.__b+1,l=null,(_=a.__i=qe(a,n,u,o))!=-1&&(o--,(l=n[_])&&(l.__u|=2)),l==null||l.__v==null?(_==-1&&(s>f?d--:s<f&&d++),typeof a.type!="function"&&(a.__u|=4)):_!=u&&(_==u-1?d--:_==u+1?d++:(_>u?d--:d++,a.__u|=4))):t.__k[i]=null;if(o)for(i=0;i<f;i++)(l=n[i])!=null&&(2&l.__u)==0&&(l.__e==r&&(r=D(l)),Re(l,l));return r}function He(t,e,n){var r,s;if(typeof t.type=="function"){for(r=t.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=t,e=He(r[s],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=D(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function qe(t,e,n,r){var s,i,a=t.key,l=t.type,u=e[n];if(u===null&&t.key==null||u&&a==u.key&&l==u.type&&(2&u.__u)==0)return n;if(r>(u!=null&&(2&u.__u)==0?1:0))for(s=n-1,i=n+1;s>=0||i<e.length;){if(s>=0){if((u=e[s])&&(2&u.__u)==0&&a==u.key&&l==u.type)return s;s--}if(i<e.length){if((u=e[i])&&(2&u.__u)==0&&a==u.key&&l==u.type)return i;i++}}return-1}function pe(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Oe.test(e)?n:n+"px"}function j(t,e,n,r,s){var i;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||pe(t.style,e,"");if(n)for(e in n)r&&n[e]==r[e]||pe(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")i=e!=(e=e.replace(Ne,"$1")),e=e.toLowerCase()in t||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?r?n.u=r.u:(n.u=_e,t.addEventListener(e,i?ie:se,i)):t.removeEventListener(e,i?ie:se,i);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Te(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=_e++;else if(e.t<n.u)return;return n(y.event?y.event(e):e)}}}function ce(t,e,n,r,s,i,a,l,u,_){var f,o,d,c,m,S,w,T,v,A,b,F,R,fe,O,P,te,E=e.type;if(e.constructor!=null)return null;128&n.__u&&(u=!!(32&n.__u),i=[l=e.__e=n.__e]),(f=y.__b)&&f(e);e:if(typeof E=="function")try{if(T=e.props,v="prototype"in E&&E.prototype.render,A=(f=E.contextType)&&r[f.__c],b=f?A?A.props.value:f.__:r,n.__c?w=(o=e.__c=n.__c).__=o.__E:(v?e.__c=o=new E(T,b):(e.__c=o=new q(T,b),o.constructor=E,o.render=ze),A&&A.sub(o),o.props=T,o.state||(o.state={}),o.context=b,o.__n=r,d=o.__d=!0,o.__h=[],o._sb=[]),v&&o.__s==null&&(o.__s=o.state),v&&E.getDerivedStateFromProps!=null&&(o.__s==o.state&&(o.__s=U({},o.__s)),U(o.__s,E.getDerivedStateFromProps(T,o.__s))),c=o.props,m=o.state,o.__v=e,d)v&&E.getDerivedStateFromProps==null&&o.componentWillMount!=null&&o.componentWillMount(),v&&o.componentDidMount!=null&&o.__h.push(o.componentDidMount);else{if(v&&E.getDerivedStateFromProps==null&&T!==c&&o.componentWillReceiveProps!=null&&o.componentWillReceiveProps(T,b),!o.__e&&o.shouldComponentUpdate!=null&&o.shouldComponentUpdate(T,o.__s,b)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(o.props=T,o.state=o.__s,o.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(L){L&&(L.__=e)}),F=0;F<o._sb.length;F++)o.__h.push(o._sb[F]);o._sb=[],o.__h.length&&a.push(o);break e}o.componentWillUpdate!=null&&o.componentWillUpdate(T,o.__s,b),v&&o.componentDidUpdate!=null&&o.__h.push(function(){o.componentDidUpdate(c,m,S)})}if(o.context=b,o.props=T,o.__P=t,o.__e=!1,R=y.__r,fe=0,v){for(o.state=o.__s,o.__d=!1,R&&R(e),f=o.render(o.props,o.state,o.context),O=0;O<o._sb.length;O++)o.__h.push(o._sb[O]);o._sb=[]}else do o.__d=!1,R&&R(e),f=o.render(o.props,o.state,o.context),o.state=o.__s;while(o.__d&&++fe<25);o.state=o.__s,o.getChildContext!=null&&(r=U(U({},r),o.getChildContext())),v&&!d&&o.getSnapshotBeforeUpdate!=null&&(S=o.getSnapshotBeforeUpdate(c,m)),P=f,f!=null&&f.type===M&&f.key==null&&(P=xe(f.props.children)),l=Me(t,ee(P)?P:[P],e,n,r,s,i,a,l,u,_),o.base=e.__e,e.__u&=-161,o.__h.length&&a.push(o),w&&(o.__E=o.__=null)}catch(L){if(e.__v=null,u||i!=null)if(L.then){for(e.__u|=u?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;i[i.indexOf(l)]=null,e.__e=l}else for(te=i.length;te--;)le(i[te]);else e.__e=n.__e,e.__k=n.__k;y.__e(L,e,n)}else i==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):l=e.__e=We(n.__e,e,n,r,s,i,a,u,_);return(f=y.diffed)&&f(e),128&e.__u?void 0:l}function De(t,e,n){for(var r=0;r<n.length;r++)ue(n[r],n[++r],n[++r]);y.__c&&y.__c(e,t),t.some(function(s){try{t=s.__h,s.__h=[],t.some(function(i){i.call(s)})}catch(i){y.__e(i,s.__v)}})}function xe(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:ee(t)?t.map(xe):U({},t)}function We(t,e,n,r,s,i,a,l,u){var _,f,o,d,c,m,S,w=n.props,T=e.props,v=e.type;if(v=="svg"?s="http://www.w3.org/2000/svg":v=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),i!=null){for(_=0;_<i.length;_++)if((c=i[_])&&"setAttribute"in c==!!v&&(v?c.localName==v:c.nodeType==3)){t=c,i[_]=null;break}}if(t==null){if(v==null)return document.createTextNode(T);t=document.createElementNS(s,v,T.is&&T),l&&(y.__m&&y.__m(e,i),l=!1),i=null}if(v==null)w===T||l&&t.data==T||(t.data=T);else{if(i=i&&Z.call(t.childNodes),w=n.props||G,!l&&i!=null)for(w={},_=0;_<t.attributes.length;_++)w[(c=t.attributes[_]).name]=c.value;for(_ in w)if(c=w[_],_!="children"){if(_=="dangerouslySetInnerHTML")o=c;else if(!(_ in T)){if(_=="value"&&"defaultValue"in T||_=="checked"&&"defaultChecked"in T)continue;j(t,_,null,c,s)}}for(_ in T)c=T[_],_=="children"?d=c:_=="dangerouslySetInnerHTML"?f=c:_=="value"?m=c:_=="checked"?S=c:l&&typeof c!="function"||w[_]===c||j(t,_,c,w[_],s);if(f)l||o&&(f.__html==o.__html||f.__html==t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(o&&(t.innerHTML=""),Me(e.type=="template"?t.content:t,ee(d)?d:[d],e,n,r,v=="foreignObject"?"http://www.w3.org/1999/xhtml":s,i,a,i?i[0]:n.__k&&D(n,0),l,u),i!=null)for(_=i.length;_--;)le(i[_]);l||(_="value",v=="progress"&&m==null?t.removeAttribute("value"):m!=null&&(m!==t[_]||v=="progress"&&!m||v=="option"&&m!=w[_])&&j(t,_,m,w[_],s),_="checked",S!=null&&S!=t[_]&&j(t,_,S,w[_],s))}return t}function ue(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(s){y.__e(s,n)}}function Re(t,e,n){var r,s;if(y.unmount&&y.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||ue(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){y.__e(i,e)}r.base=r.__P=null}if(r=t.__k)for(s=0;s<r.length;s++)r[s]&&Re(r[s],e,n||typeof t.type!="function");n||le(t.__e),t.__c=t.__=t.__e=void 0}function ze(t,e,n){return this.constructor(t,n)}function Ye(t,e,n){var r,s,i,a;e==document&&(e=document.documentElement),y.__&&y.__(t,e),s=(r=!1)?null:e.__k,i=[],a=[],ce(e,t=e.__k=je(M,null,[t]),s||G,G,e.namespaceURI,s?null:e.firstChild?Z.call(e.childNodes):null,i,s?s.__e:e.firstChild,r,a),De(i,t,a)}Z=Ue.slice,y={__e:function(t,e,n,r){for(var s,i,a;e=e.__;)if((s=e.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(t)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(t,r||{}),a=s.__d),a)return s.__E=s}catch(l){t=l}throw t}},be=0,q.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=U({},this.state),typeof t=="function"&&(t=t(U({},n),this.props)),t&&U(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),he(this))},q.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),he(this))},q.prototype.render=M,$=[],Ae=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ee=function(t,e){return t.__v.__b-e.__v.__b},Y.__r=0,Ne=/(PointerCapture)$|Capture$/i,_e=0,se=Te(!1),ie=Te(!0);var Je=0;function h(t,e,n,r,s,i){e||(e={});var a,l,u=e;if("ref"in u)for(l in u={},e)l=="ref"?a=e[l]:u[l]=e[l];var _={type:t,props:u,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Je,__i:-1,__u:0,__source:s,__self:i};if(typeof t=="function"&&(a=t.defaultProps))for(l in a)u[l]===void 0&&(u[l]=a[l]);return y.vnode&&y.vnode(_),_}var V,k,ne,ve,oe=0,Pe=[],I=y,ge=I.__b,ye=I.__r,Se=I.diffed,we=I.__c,ke=I.unmount,Ie=I.__;function de(t,e){I.__h&&I.__h(k,t,oe||e),oe=0;var n=k.__H||(k.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function C(t){return oe=1,Xe(Be,t)}function Xe(t,e,n){var r=de(V++,2);if(r.t=t,!r.__c&&(r.__=[Be(void 0,e),function(l){var u=r.__N?r.__N[0]:r.__[0],_=r.t(u,l);u!==_&&(r.__N=[_,r.__[1]],r.__c.setState({}))}],r.__c=k,!k.__f)){var s=function(l,u,_){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(d){return!!d.__c});if(f.every(function(d){return!d.__N}))return!i||i.call(this,l,u,_);var o=r.__c.props!==l;return f.forEach(function(d){if(d.__N){var c=d.__[0];d.__=d.__N,d.__N=void 0,c!==d.__[0]&&(o=!0)}}),i&&i.call(this,l,u,_)||o};k.__f=!0;var i=k.shouldComponentUpdate,a=k.componentWillUpdate;k.componentWillUpdate=function(l,u,_){if(this.__e){var f=i;i=void 0,s(l,u,_),i=f}a&&a.call(this,l,u,_)},k.shouldComponentUpdate=s}return r.__N||r.__}function x(t,e){var n=de(V++,3);!I.__s&&Le(n.__H,e)&&(n.__=t,n.u=e,k.__H.__h.push(n))}function J(t,e){var n=de(V++,7);return Le(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Qe(){for(var t;t=Pe.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ae),t.__H.__h=[]}catch(e){t.__H.__h=[],I.__e(e,t.__v)}}I.__b=function(t){k=null,ge&&ge(t)},I.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Ie&&Ie(t,e)},I.__r=function(t){ye&&ye(t),V=0;var e=(k=t.__c).__H;e&&(ne===k?(e.__h=[],k.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ae),e.__h=[],V=0)),ne=k},I.diffed=function(t){Se&&Se(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Pe.push(e)!==1&&ve===I.requestAnimationFrame||((ve=I.requestAnimationFrame)||Ze)(Qe)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),ne=k=null},I.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(r){return!r.__||ae(r)})}catch(r){e.some(function(s){s.__h&&(s.__h=[])}),e=[],I.__e(r,n.__v)}}),we&&we(t,e)},I.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{W(r)}catch(s){e=s}}),n.__H=void 0,e&&I.__e(e,n.__v))};var Ce=typeof requestAnimationFrame=="function";function Ze(t){var e,n=function(){clearTimeout(r),Ce&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);Ce&&(e=requestAnimationFrame(n))}function W(t){var e=k,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),k=e}function ae(t){var e=k;t.__c=t.__(),k=e}function Le(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function Be(t,e){return typeof e=="function"?e(t):e}function et({tabs:t=[],defaultActiveId:e,tabsHeaderRight:n=null}){var a;const[r,s]=C(e||((a=t[0])==null?void 0:a.id)),i=t.find(l=>l.id===r);return h("div",{className:"tabs-container",children:[h("div",{className:"tabs-wrapper",children:[h("div",{class:"tabs-bar",children:t.map(l=>h("span",{className:`tab ${l.id===r?"active":""}`,onClick:()=>s(l.id),children:l.label},l.id))}),n!==null&&n]}),h("div",{className:"tab-content",children:i==null?void 0:i.content})]})}function X({children:t,onClick:e,type:n="button",className:r=""}){return h("button",{type:n,className:`gh-btn ${r}`,onClick:e,children:t})}function tt({value:t,onInput:e,placeholder:n="",type:r="text"}){return h("input",{className:"gh-input",type:r,value:t,onInput:e,placeholder:n})}function nt({title:t,message:e,onConfirm:n,onCancel:r}){return h("div",{className:"modal-overlay",children:h("div",{className:"modal-content",children:[h("h3",{className:"modal-title",children:t}),h("p",{className:"modal-message",children:e}),h("div",{className:"modal-actions",children:[h(X,{onClick:n,children:"Confirm"}),h(X,{variant:"secondary",onClick:r,children:"Cancel"})]})]})})}class N{static formatTime(e,n=0){const r=Math.floor(e+n),s=Math.floor(r/3600),i=Math.floor(r%3600/60),a=Math.floor(r%60);return`${s.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}static timeStringSince(e,n=0){const r=new Date(e);if(isNaN(r.getTime()))return this.formatTime(0,n);const s=Math.floor((Date.now()-r.getTime())/1e3);return this.formatTime(s,n)}static splitSeconds(e){return{minutes:Math.floor(e/60),seconds:Math.floor(e%60)}}}const rt="https://api.github.com",p={GITHUB_TOKEN:"githubToken",ACTIVE_ISSUE:"activeIssue",START_TIME:"startTime",TRACKED_TIMES:"trackedTimes",ISSUES:"issues"},Ge=1e3,st=t=>`⏱️ Tracked time: **${t}**`;class g{static async get(e){return new Promise(n=>{chrome.storage.local.get(e,r=>n(r[e]||null))})}static async set(e,n){return new Promise(r=>{chrome.storage.local.set({[e]:n},r)})}static async remove(e){return new Promise(n=>{chrome.storage.local.remove(e,n)})}static async getMultiple(e){return new Promise(n=>{chrome.storage.local.get(e,r=>{const s={};for(const i of e)s[i]=r[i]||null;n(s)})})}static async removeMultiple(e){return new Promise(n=>{chrome.storage.local.remove(e,n)})}}class H{static async getGitHubToken(){return g.get(p.GITHUB_TOKEN)}static async setGitHubToken(e){return g.set(p.GITHUB_TOKEN,e)}static async removeGitHubToken(){return g.remove(p.GITHUB_TOKEN)}static async validateGitHubToken(e){try{return(await fetch("https://api.github.com/user",{headers:{Authorization:`token ${e}`}})).ok}catch(n){return console.error("Token validation failed:",n),!1}}}class re{static parseIssueUrl(e){const n=e.match(/^\/([^/]+)\/([^/]+)\/issues\/(\d+)/);if(!n)throw new Error("Invalid GitHub issue URL");return{owner:n[1],repo:n[2],issueNumber:parseInt(n[3],10),fullRepo:`${n[1]}/${n[2]}`}}static async apiRequest(e,n={}){const r=await H.getGitHubToken();if(!r)throw new Error("GitHub token not found");const s=await fetch(`${rt}${e}`,{...n,headers:{Authorization:`token ${r}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json",...n.headers}});if(!s.ok){const i=await s.json();throw new Error(i.message||"GitHub API request failed")}return s.json()}static async getUser(){return this.apiRequest("/user")}static async postComment({owner:e,repo:n,issueNumber:r,seconds:s}){const i=Math.floor(s/60),a=Math.floor(s%60),l=i>0?`${i} min${a>0?` ${a} sec`:""}`:`${a} sec`;return this.apiRequest(`/repos/${e}/${n}/issues/${r}/comments`,{method:"POST",body:JSON.stringify({body:st(l)})})}}const B=p.ISSUES;class z{static async getAll(){return await g.get(B)||[]}static async add(e){const n=await this.getAll();n.some(s=>s.url===e.url)||(n.push(e),await g.set(B,n))}static async update(e,n){const s=(await this.getAll()).map(i=>i.url===e?{...i,...n}:i);await g.set(B,s)}static async remove(e){const r=(await this.getAll()).filter(s=>s.url!==e);await g.set(B,r)}static async removeAll(){await g.remove(p.ISSUES)}static async getByUrl(e){return(await this.getAll()).find(r=>r.url===e)||null}static async exists(e){return(await this.getAll()).some(r=>r.url===e)}static async clear(){await g.remove(B)}}class Q{static async getTotalTimeForIssue(e){return(await g.get(p.TRACKED_TIMES)||[]).filter(r=>r.issueUrl===e).reduce((r,s)=>r+(s.seconds||0),0)}static async startTimer(e,n=null){try{const[r,s,i]=await Promise.all([g.get(p.ACTIVE_ISSUE),g.get(p.START_TIME),z.getByUrl(e)]);r&&s&&r!==e&&(console.log(`Останавливаем таймер для предыдущей задачи: ${r}`),await this.stopTimer(r,n));const a=re.parseIssueUrl(e),{owner:l,repo:u,issueNumber:_}=a,f=this.getIssueTitle()||"Untitled",o=`(${l}) ${u} | ${f} | #${_}`;await Promise.all([g.set(p.ACTIVE_ISSUE,e),g.set(p.START_TIME,new Date().toISOString())]),i||await z.add({url:e,title:o});const d=await this.getTotalTimeForIssue(e);let c=null;return n&&(n.textContent=`${N.formatTime(0,d)} ⏸ Stop`,c=window.setInterval(async()=>{const m=await g.get(p.START_TIME);if(!m||isNaN(new Date(m).getTime())){clearInterval(c),n.textContent=`${N.formatTime(0,d)} Start Timer`;return}n.textContent=`${N.timeStringSince(m,d)} ⏸ Stop`},Ge),n.dataset.intervalId=c.toString()),{issueUrl:e,totalTime:d,intervalId:c,isRunning:!0}}catch(r){return console.error("Не удалось запустить таймер:",r),n!=null&&n.dataset.intervalId&&(clearInterval(parseInt(n.dataset.intervalId,10)),n.textContent="Start Timer"),await g.removeMultiple([p.ACTIVE_ISSUE,p.START_TIME]),{issueUrl:e,totalTime:0,intervalId:null,isRunning:!1}}}static async stopTimer(e,n=null){try{const[r,s,i,a]=await Promise.all([g.get(p.START_TIME),H.getGitHubToken(),g.get(p.TRACKED_TIMES),z.getByUrl(e)]);if(!r||isNaN(new Date(r).getTime()))return console.error("Некорректное startTime:",r),this.resetButtonState(n),await g.removeMultiple([p.ACTIVE_ISSUE,p.START_TIME]),{issueUrl:e,totalTime:0,isRunning:!1};const l=(a==null?void 0:a.title)||"Untitled",u=Math.floor((Date.now()-new Date(r).getTime())/1e3),_=re.parseIssueUrl(e),{owner:f,repo:o,issueNumber:d}=_;if(s)try{await re.postComment({owner:f,repo:o,issueNumber:d,seconds:u})}catch(S){console.error("Не удалось отправить комментарий:",S)}const c=[...i||[],{issueUrl:e,title:l,seconds:u,date:new Date().toISOString().slice(0,10)}];await Promise.all([g.set(p.TRACKED_TIMES,c),g.removeMultiple([p.ACTIVE_ISSUE,p.START_TIME])]);const m=await this.getTotalTimeForIssue(e);return this.resetButtonState(n,m),{issueUrl:e,totalTime:m,isRunning:!1}}catch(r){return console.error("Не удалось остановить таймер:",r),this.resetButtonState(n),{issueUrl:e,totalTime:0,isRunning:!1}}}static getIssueTitle(){var e,n,r,s;return((n=(e=document.querySelector("span.js-issue-title"))==null?void 0:e.textContent)==null?void 0:n.trim())||((s=(r=document.querySelector("[data-testid='issue-title']"))==null?void 0:r.textContent)==null?void 0:s.trim())||null}static resetButtonState(e,n=0){e!=null&&e.dataset.intervalId&&(clearInterval(parseInt(e.dataset.intervalId,10)),delete e.dataset.intervalId),e&&(e.textContent=`${N.formatTime(0,n)} Start Timer`)}}function Ve({entries:t,showTimerControls:e=!1}){const[n,r]=C(null),[s,i]=C(null),[a,l]=C({});x(()=>{(async()=>{const[o,d]=await Promise.all([g.get(p.ACTIVE_ISSUE),g.get(p.START_TIME)]);if(r(o),i(d),o&&d&&!isNaN(new Date(d).getTime())){const c=(Date.now()-new Date(d).getTime())/1e3;l(m=>({...m,[o]:N.formatTime(c)}))}})();const f=o=>{o[p.ACTIVE_ISSUE]&&r(o[p.ACTIVE_ISSUE].newValue),o[p.START_TIME]&&i(o[p.START_TIME].newValue)};return chrome.storage.local.onChanged.addListener(f),()=>{chrome.storage.local.onChanged.removeListener(f)}},[]),x(()=>{if(!e)return;const _=async()=>{if(!n||!s||isNaN(new Date(s).getTime())){l(d=>{const c={...d};return delete c[n],c});return}return setInterval(()=>{const d=(Date.now()-new Date(s).getTime())/1e3;l(c=>({...c,[n]:N.formatTime(d)}))},Ge)};let f;return _().then(o=>{f=o}),()=>{f&&clearInterval(f)}},[n,s,e]);const u=async _=>{console.log("handleTimerClick:",_.issueUrl,"action:",_.issueUrl===n?"stop":"start"),console.log("entry",_),_.issueUrl===n&&s&&!isNaN(new Date(s).getTime())?(await Q.stopTimer(_.issueUrl,null,_.title),l(f=>{const o={...f};return delete o[_.issueUrl],o}),chrome.runtime.sendMessage({action:"timerStopped",issueUrl:_.issueUrl})):(await Q.startTimer(_.issueUrl),chrome.runtime.sendMessage({action:"timerStarted",issueUrl:_.issueUrl}))};return h("div",{className:"tracked-list",children:t.map((_,f)=>h("div",{className:"tracked-entry",children:[h("div",{className:"tracked-title",children:_.title}),h("div",{className:"tracked-meta",children:[_.displayTime," ",_.date&&`on ${_.date}`," |"," ",h("a",{href:`https://github.com${_.issueUrl}`,target:"_blank",children:"View"}),e&&h(M,{children:[" | ",h("span",{onClick:()=>u(_),className:"startTrackingBtn",children:_.issueUrl===n&&s&&!isNaN(new Date(s).getTime())?`${a[_.issueUrl]||"00:00:00"} Stop`:"Start"})]})]})]},_.issueUrl||f))})}function Fe({onSearch:t}){const[e,n]=C("");return h("div",{className:"search-bar",children:h("input",{type:"text",placeholder:"Search tasks...",value:e,onInput:s=>{const i=s.target.value;n(i),t(i)}})})}function it({tracked:t}){const[e,n]=C(null),[r,s]=C(null),[i,a]=C({}),[l,u]=C("");x(()=>{(async()=>{const[m,S]=await Promise.all([g.get(p.ACTIVE_ISSUE),g.get(p.START_TIME)]);if(n(m),s(S),m&&S&&!isNaN(new Date(S).getTime())){const w=await Q.getTotalTimeForIssue(m),T=(Date.now()-new Date(S).getTime())/1e3;a(v=>({...v,[m]:N.formatTime(T+w)}))}})();const c=m=>{m[p.ACTIVE_ISSUE]&&n(m[p.ACTIVE_ISSUE].newValue),m[p.START_TIME]&&s(m[p.START_TIME].newValue)};return chrome.storage.local.onChanged.addListener(c),()=>{chrome.storage.local.onChanged.removeListener(c)}},[]),x(()=>{if(!e||!r||isNaN(new Date(r).getTime())){a(m=>{const S={...m};return delete S[e],S});return}const d=async()=>{const m=await Q.getTotalTimeForIssue(e);return setInterval(()=>{const w=(Date.now()-new Date(r).getTime())/1e3;a(T=>({...T,[e]:N.formatTime(w+m)}))},1e3)};let c;return d().then(m=>{c=m}),()=>{c&&clearInterval(c)}},[e,r]);const _=d=>{u(d)},f=J(()=>t.filter(d=>d.title.toLowerCase().includes(l.toLowerCase())||d.issueUrl.toLowerCase().includes(l.toLowerCase())),[t,l]),o=J(()=>{const d=f.reduce((c,m)=>(c[m.issueUrl]||(c[m.issueUrl]={title:m.title,seconds:0,issueUrl:m.issueUrl}),c[m.issueUrl].seconds+=m.seconds,c),{});return Object.values(d).map(c=>({...c,displayTime:c.issueUrl===e&&i[c.issueUrl]?i[c.issueUrl]:N.formatTime(c.seconds)}))},[f,i,e]);return h(M,{children:[h(Fe,{onSearch:_}),h(Ve,{entries:o,showTimerControls:!0})]})}function ot({tracked:t}){const[e,n]=C(""),r=a=>{n(a)},s=J(()=>t.filter(a=>a.title.toLowerCase().includes(e.toLowerCase())||a.issueUrl&&a.issueUrl.toLowerCase().includes(e.toLowerCase())),[t,e]),i=J(()=>s.slice(-10).reverse().map(a=>({...a,displayTime:N.formatTime(a.seconds)})),[s]);return h(M,{children:[h(Fe,{onSearch:r}),h(Ve,{entries:i})]})}function at(t,e=null){const[n,r]=C(e);return x(()=>{(async()=>{const a=await g.get(t)||e;r(a)})();const i=(a,l)=>{l==="local"&&a[t]&&r(a[t].newValue||e)};return chrome.storage.onChanged.addListener(i),()=>chrome.storage.onChanged.removeListener(i)},[t,e]),n}function _t(){const t="no token",[e,n]=C(""),[r,s]=C(!1),[i,a]=C(t),[l,u]=C(null),[_,f]=C(!1),o=at(p.TRACKED_TIMES,[]);x(()=>{(async()=>{const b=await H.getGitHubToken();b&&(n(b),a(b.slice(0,4)+"••••••••"))})()},[]);const d=async()=>{await H.validateGitHubToken(e)?(await H.setGitHubToken(e),a(e.slice(0,4)+"••••••••"),s(!1),u(null)):u({type:"error",message:"Invalid token"})},c=()=>{s(!0)},m=()=>{s(!1),u(null)},S=async()=>{await H.removeGitHubToken(),a(t),n("")},w=()=>{f(!0)},T=async()=>{try{await g.remove(p.TRACKED_TIMES),await z.removeAll(),f(!1)}catch(A){console.error("Failed to clear tracked times:",A),f(!1),alert("Failed to clear tracked times. Please try again.")}},v=()=>{f(!1)};return h("div",{className:"popup",children:[h("h2",{children:"⏱️ GitHub Time Tracker"}),r?h("div",{style:{marginBottom:"15px",marginTop:"15px"},children:[h(tt,{type:"password",value:e,onInput:A=>n(A.target.value),placeholder:"GitHub Token"}),l&&l.type==="error"&&h("span",{style:{color:"red",marginBottom:"10px",display:"inline-block"},children:l.message}),h("div",{style:{display:"flex",gap:"10px"},children:[h(X,{onClick:d,children:"Save Token"}),h(X,{variant:"secondary",onClick:m,children:"Cancel"})]})]}):h("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",marginTop:"15px"},children:[h("span",{style:{fontSize:"0.9em",color:"#555"},children:[e?"✅":"❌"," Token: ",i]}),h("div",{children:[e&&h("span",{style:{marginRight:"10px",cursor:"pointer"},onClick:S,children:"Remove"}),h("span",{onClick:c,style:{color:"#007bff",cursor:"pointer",textDecoration:"underline"},children:"Change"})]})]}),o.length>0&&h("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:h("div",{style:{flex:1},children:h(et,{tabs:[{id:"summary",label:"Summary",content:h(it,{tracked:o})},{id:"history",label:"History",content:h(ot,{tracked:o})}],tabsHeaderRight:h("div",{onClick:w,className:"clearTrackedTimesBtn",children:"Clear"})})})}),_&&h(nt,{title:"Confirm Clear",message:"Are you sure you want to clear all tracked times? This action cannot be undone.",onConfirm:T,onCancel:v})]})}console.log("popup.jsx loaded!");Ye(h(_t,{}),document.getElementById("root"));
