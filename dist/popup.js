(function(){"use strict";try{if(typeof document<"u"){var o=document.createElement("style");o.appendChild(document.createTextNode(".tabs-container{color:#1f2328}.tabs-wrapper{display:flex;align-items:center;justify-content:space-between;gap:5px;margin-bottom:10px}.tabs-bar{display:flex;gap:10px}.tab{cursor:pointer;font-size:14px;text-decoration:none;padding:5px 7px;border-radius:.375rem;transition:background-color .2s}.tab:hover,.tab.active{background-color:#818b981a}.tab-content{margin-top:8px}.gh-btn{background-color:#2da44e;color:#fff;font-weight:500;border:1px solid rgba(27,31,36,.15);border-radius:6px;padding:6px 12px;font-size:14px;line-height:20px;cursor:pointer;display:inline-block;text-align:center;width:100%;transition:background-color .2s ease}.gh-btn:hover{background-color:#218739}.gh-btn.danger{background-color:#d73a49}.gh-btn.danger:hover{background-color:#cb2431}.gh-input{width:100%;padding:6px 8px;font-size:14px;border:1px solid #d0d7de;border-radius:6px;box-shadow:inset 0 1px #d0d7de33;font-family:inherit;margin-bottom:8px;outline:none;box-sizing:border-box}.gh-input:focus{border-color:#0969da;box-shadow:0 0 0 2px #0969da4d}.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content{background-color:#fff;padding:20px;border-radius:8px;max-width:400px;width:90%;box-shadow:0 2px 10px #0000001a}.modal-title{margin:0 0 10px;font-size:1.2em}.modal-message{margin:0 0 20px;color:#333}.modal-actions{display:flex;justify-content:flex-end;gap:10px}.tracked-list{padding:4px 0;font-size:14px}.tracked-entry:not(:last-child){border-bottom:1px solid #ccc;margin-bottom:10px;padding-bottom:7px}.tracked-title{line-height:145%}.tracked-meta{font-size:13px;color:#555;margin-top:5px}.tracked-meta a{color:#0969da;text-decoration:none}.tracked-meta a:hover{text-decoration:underline}.startTrackingBtn{color:#007bff;cursor:pointer}.startTrackingBtn:hover{text-decoration:underline}.search-bar{margin:15px 0 10px}.search-bar input{width:100%;padding:8px 12px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;font-size:1em}.today-total-time{margin-bottom:10px;font-weight:700}*{margin:0;padding:0;box-sizing:border-box}.clearTrackedTimesBtn{font-size:13px;cursor:pointer}.clearTrackedTimesBtn:hover{text-decoration:underline}.popup{padding:15px;box-sizing:border-box;font-family:sans-serif;width:400px}")),document.head.appendChild(o)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
var Z,S,be,$,me,Ee,Ae,Ne,le,oe,se,V={},Ue=[],Oe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ee=Array.isArray;function U(t,e){for(var n in e)t[n]=e[n];return t}function _e(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function je(t,e,n){var r,o,s,a={};for(s in e)s=="key"?r=e[s]:s=="ref"?o=e[s]:a[s]=e[s];if(arguments.length>2&&(a.children=arguments.length>3?Z.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)a[s]==null&&(a[s]=t.defaultProps[s]);return q(t,a,r,o,null)}function q(t,e,n,r,o){var s={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++be,__i:-1,__u:0};return o==null&&S.vnode!=null&&S.vnode(s),s}function D(t){return t.children}function W(t,e){this.props=t,this.context=e}function H(t,e){if(e==null)return t.__?H(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?H(t):null}function $e(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return $e(t)}}function he(t){(!t.__d&&(t.__d=!0)&&$.push(t)&&!J.__r++||me!=S.debounceRendering)&&((me=S.debounceRendering)||Ee)(J)}function J(){for(var t,e,n,r,o,s,a,_=1;$.length;)$.length>_&&$.sort(Ae),t=$.shift(),_=$.length,t.__d&&(n=void 0,o=(r=(e=t).__v).__e,s=[],a=[],e.__P&&((n=U({},r)).__v=r.__v+1,S.vnode&&S.vnode(n),ce(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[o]:null,s,o??H(r),!!(32&r.__u),a),n.__v=r.__v,n.__.__k[n.__i]=n,He(s,n,a),n.__e!=o&&$e(n)));J.__r=0}function De(t,e,n,r,o,s,a,_,u,l,d){var i,f,c,h,p,y,T=r&&r.__k||Ue,v=e.length;for(u=Ke(n,e,T,u,v),i=0;i<v;i++)(c=n.__k[i])!=null&&(f=c.__i==-1?V:T[c.__i]||V,c.__i=i,y=ce(t,c,f,o,s,a,_,u,l,d),h=c.__e,c.ref&&f.ref!=c.ref&&(f.ref&&ue(f.ref,null,c),d.push(c.ref,c.__c||h,c)),p==null&&h!=null&&(p=h),4&c.__u||f.__k===c.__k?u=Me(c,u,t):typeof c.type=="function"&&y!==void 0?u=y:h&&(u=h.nextSibling),c.__u&=-7);return n.__e=p,u}function Ke(t,e,n,r,o){var s,a,_,u,l,d=n.length,i=d,f=0;for(t.__k=new Array(o),s=0;s<o;s++)(a=e[s])!=null&&typeof a!="boolean"&&typeof a!="function"?(u=s+f,(a=t.__k[s]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?q(null,a,null,null,null):ee(a)?q(D,{children:a},null,null,null):a.constructor==null&&a.__b>0?q(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=t,a.__b=t.__b+1,_=null,(l=a.__i=qe(a,n,u,i))!=-1&&(i--,(_=n[l])&&(_.__u|=2)),_==null||_.__v==null?(l==-1&&(o>d?f--:o<d&&f++),typeof a.type!="function"&&(a.__u|=4)):l!=u&&(l==u-1?f--:l==u+1?f++:(l>u?f--:f++,a.__u|=4))):t.__k[s]=null;if(i)for(s=0;s<d;s++)(_=n[s])!=null&&(2&_.__u)==0&&(_.__e==r&&(r=H(_)),Re(_,_));return r}function Me(t,e,n){var r,o;if(typeof t.type=="function"){for(r=t.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=t,e=Me(r[o],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=H(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function qe(t,e,n,r){var o,s,a=t.key,_=t.type,u=e[n];if(u===null&&t.key==null||u&&a==u.key&&_==u.type&&(2&u.__u)==0)return n;if(r>(u!=null&&(2&u.__u)==0?1:0))for(o=n-1,s=n+1;o>=0||s<e.length;){if(o>=0){if((u=e[o])&&(2&u.__u)==0&&a==u.key&&_==u.type)return o;o--}if(s<e.length){if((u=e[s])&&(2&u.__u)==0&&a==u.key&&_==u.type)return s;s++}}return-1}function pe(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Oe.test(e)?n:n+"px"}function K(t,e,n,r,o){var s;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||pe(t.style,e,"");if(n)for(e in n)r&&n[e]==r[e]||pe(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(Ne,"$1")),e=e.toLowerCase()in t||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?r?n.u=r.u:(n.u=le,t.addEventListener(e,s?se:oe,s)):t.removeEventListener(e,s?se:oe,s);else{if(o=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Te(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=le++;else if(e.t<n.u)return;return n(S.event?S.event(e):e)}}}function ce(t,e,n,r,o,s,a,_,u,l){var d,i,f,c,h,p,y,T,v,b,E,O,R,fe,j,P,te,N=e.type;if(e.constructor!=null)return null;128&n.__u&&(u=!!(32&n.__u),s=[_=e.__e=n.__e]),(d=S.__b)&&d(e);e:if(typeof N=="function")try{if(T=e.props,v="prototype"in N&&N.prototype.render,b=(d=N.contextType)&&r[d.__c],E=d?b?b.props.value:d.__:r,n.__c?y=(i=e.__c=n.__c).__=i.__E:(v?e.__c=i=new N(T,E):(e.__c=i=new W(T,E),i.constructor=N,i.render=ze),b&&b.sub(i),i.props=T,i.state||(i.state={}),i.context=E,i.__n=r,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&N.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=U({},i.__s)),U(i.__s,N.getDerivedStateFromProps(T,i.__s))),c=i.props,h=i.state,i.__v=e,f)v&&N.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&N.getDerivedStateFromProps==null&&T!==c&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(T,E),!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(T,i.__s,E)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(i.props=T,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(L){L&&(L.__=e)}),O=0;O<i._sb.length;O++)i.__h.push(i._sb[O]);i._sb=[],i.__h.length&&a.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(T,i.__s,E),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(c,h,p)})}if(i.context=E,i.props=T,i.__P=t,i.__e=!1,R=S.__r,fe=0,v){for(i.state=i.__s,i.__d=!1,R&&R(e),d=i.render(i.props,i.state,i.context),j=0;j<i._sb.length;j++)i.__h.push(i._sb[j]);i._sb=[]}else do i.__d=!1,R&&R(e),d=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++fe<25);i.state=i.__s,i.getChildContext!=null&&(r=U(U({},r),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(p=i.getSnapshotBeforeUpdate(c,h)),P=d,d!=null&&d.type===D&&d.key==null&&(P=xe(d.props.children)),_=De(t,ee(P)?P:[P],e,n,r,o,s,a,_,u,l),i.base=e.__e,e.__u&=-161,i.__h.length&&a.push(i),y&&(i.__E=i.__=null)}catch(L){if(e.__v=null,u||s!=null)if(L.then){for(e.__u|=u?160:128;_&&_.nodeType==8&&_.nextSibling;)_=_.nextSibling;s[s.indexOf(_)]=null,e.__e=_}else for(te=s.length;te--;)_e(s[te]);else e.__e=n.__e,e.__k=n.__k;S.__e(L,e,n)}else s==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):_=e.__e=We(n.__e,e,n,r,o,s,a,u,l);return(d=S.diffed)&&d(e),128&e.__u?void 0:_}function He(t,e,n){for(var r=0;r<n.length;r++)ue(n[r],n[++r],n[++r]);S.__c&&S.__c(e,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(s){s.call(o)})}catch(s){S.__e(s,o.__v)}})}function xe(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:ee(t)?t.map(xe):U({},t)}function We(t,e,n,r,o,s,a,_,u){var l,d,i,f,c,h,p,y=n.props,T=e.props,v=e.type;if(v=="svg"?o="http://www.w3.org/2000/svg":v=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),s!=null){for(l=0;l<s.length;l++)if((c=s[l])&&"setAttribute"in c==!!v&&(v?c.localName==v:c.nodeType==3)){t=c,s[l]=null;break}}if(t==null){if(v==null)return document.createTextNode(T);t=document.createElementNS(o,v,T.is&&T),_&&(S.__m&&S.__m(e,s),_=!1),s=null}if(v==null)y===T||_&&t.data==T||(t.data=T);else{if(s=s&&Z.call(t.childNodes),y=n.props||V,!_&&s!=null)for(y={},l=0;l<t.attributes.length;l++)y[(c=t.attributes[l]).name]=c.value;for(l in y)if(c=y[l],l!="children"){if(l=="dangerouslySetInnerHTML")i=c;else if(!(l in T)){if(l=="value"&&"defaultValue"in T||l=="checked"&&"defaultChecked"in T)continue;K(t,l,null,c,o)}}for(l in T)c=T[l],l=="children"?f=c:l=="dangerouslySetInnerHTML"?d=c:l=="value"?h=c:l=="checked"?p=c:_&&typeof c!="function"||y[l]===c||K(t,l,c,y[l],o);if(d)_||i&&(d.__html==i.__html||d.__html==t.innerHTML)||(t.innerHTML=d.__html),e.__k=[];else if(i&&(t.innerHTML=""),De(e.type=="template"?t.content:t,ee(f)?f:[f],e,n,r,v=="foreignObject"?"http://www.w3.org/1999/xhtml":o,s,a,s?s[0]:n.__k&&H(n,0),_,u),s!=null)for(l=s.length;l--;)_e(s[l]);_||(l="value",v=="progress"&&h==null?t.removeAttribute("value"):h!=null&&(h!==t[l]||v=="progress"&&!h||v=="option"&&h!=y[l])&&K(t,l,h,y[l],o),l="checked",p!=null&&p!=t[l]&&K(t,l,p,y[l],o))}return t}function ue(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(o){S.__e(o,n)}}function Re(t,e,n){var r,o;if(S.unmount&&S.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||ue(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){S.__e(s,e)}r.base=r.__P=null}if(r=t.__k)for(o=0;o<r.length;o++)r[o]&&Re(r[o],e,n||typeof t.type!="function");n||_e(t.__e),t.__c=t.__=t.__e=void 0}function ze(t,e,n){return this.constructor(t,n)}function Ye(t,e,n){var r,o,s,a;e==document&&(e=document.documentElement),S.__&&S.__(t,e),o=(r=!1)?null:e.__k,s=[],a=[],ce(e,t=e.__k=je(D,null,[t]),o||V,V,e.namespaceURI,o?null:e.firstChild?Z.call(e.childNodes):null,s,o?o.__e:e.firstChild,r,a),He(s,t,a)}Z=Ue.slice,S={__e:function(t,e,n,r){for(var o,s,a;e=e.__;)if((o=e.__c)&&!o.__)try{if((s=o.constructor)&&s.getDerivedStateFromError!=null&&(o.setState(s.getDerivedStateFromError(t)),a=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,r||{}),a=o.__d),a)return o.__E=o}catch(_){t=_}throw t}},be=0,W.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=U({},this.state),typeof t=="function"&&(t=t(U({},n),this.props)),t&&U(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),he(this))},W.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),he(this))},W.prototype.render=D,$=[],Ee=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ae=function(t,e){return t.__v.__b-e.__v.__b},J.__r=0,Ne=/(PointerCapture)$|Capture$/i,le=0,oe=Te(!1),se=Te(!0);var Je=0;function m(t,e,n,r,o,s){e||(e={});var a,_,u=e;if("ref"in u)for(_ in u={},e)_=="ref"?a=e[_]:u[_]=e[_];var l={type:t,props:u,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Je,__i:-1,__u:0,__source:o,__self:s};if(typeof t=="function"&&(a=t.defaultProps))for(_ in a)u[_]===void 0&&(u[_]=a[_]);return S.vnode&&S.vnode(l),l}var F,k,ne,ve,ie=0,Pe=[],I=S,ge=I.__b,ye=I.__r,we=I.diffed,Se=I.__c,ke=I.unmount,Ie=I.__;function de(t,e){I.__h&&I.__h(k,t,ie||e),ie=0;var n=k.__H||(k.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function C(t){return ie=1,Xe(Be,t)}function Xe(t,e,n){var r=de(F++,2);if(r.t=t,!r.__c&&(r.__=[Be(void 0,e),function(_){var u=r.__N?r.__N[0]:r.__[0],l=r.t(u,_);u!==l&&(r.__N=[l,r.__[1]],r.__c.setState({}))}],r.__c=k,!k.__f)){var o=function(_,u,l){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(f){return!!f.__c});if(d.every(function(f){return!f.__N}))return!s||s.call(this,_,u,l);var i=r.__c.props!==_;return d.forEach(function(f){if(f.__N){var c=f.__[0];f.__=f.__N,f.__N=void 0,c!==f.__[0]&&(i=!0)}}),s&&s.call(this,_,u,l)||i};k.__f=!0;var s=k.shouldComponentUpdate,a=k.componentWillUpdate;k.componentWillUpdate=function(_,u,l){if(this.__e){var d=s;s=void 0,o(_,u,l),s=d}a&&a.call(this,_,u,l)},k.shouldComponentUpdate=o}return r.__N||r.__}function x(t,e){var n=de(F++,3);!I.__s&&Le(n.__H,e)&&(n.__=t,n.u=e,k.__H.__h.push(n))}function G(t,e){var n=de(F++,7);return Le(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Qe(){for(var t;t=Pe.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(z),t.__H.__h.forEach(ae),t.__H.__h=[]}catch(e){t.__H.__h=[],I.__e(e,t.__v)}}I.__b=function(t){k=null,ge&&ge(t)},I.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Ie&&Ie(t,e)},I.__r=function(t){ye&&ye(t),F=0;var e=(k=t.__c).__H;e&&(ne===k?(e.__h=[],k.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(z),e.__h.forEach(ae),e.__h=[],F=0)),ne=k},I.diffed=function(t){we&&we(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Pe.push(e)!==1&&ve===I.requestAnimationFrame||((ve=I.requestAnimationFrame)||Ze)(Qe)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),ne=k=null},I.__c=function(t,e){e.some(function(n){try{n.__h.forEach(z),n.__h=n.__h.filter(function(r){return!r.__||ae(r)})}catch(r){e.some(function(o){o.__h&&(o.__h=[])}),e=[],I.__e(r,n.__v)}}),Se&&Se(t,e)},I.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{z(r)}catch(o){e=o}}),n.__H=void 0,e&&I.__e(e,n.__v))};var Ce=typeof requestAnimationFrame=="function";function Ze(t){var e,n=function(){clearTimeout(r),Ce&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);Ce&&(e=requestAnimationFrame(n))}function z(t){var e=k,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),k=e}function ae(t){var e=k;t.__c=t.__(),k=e}function Le(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function Be(t,e){return typeof e=="function"?e(t):e}function et({tabs:t=[],defaultActiveId:e,tabsHeaderRight:n=null}){var a;const[r,o]=C(e||((a=t[0])==null?void 0:a.id)),s=t.find(_=>_.id===r);return m("div",{className:"tabs-container",children:[m("div",{className:"tabs-wrapper",children:[m("div",{class:"tabs-bar",children:t.map(_=>m("span",{className:`tab ${_.id===r?"active":""}`,onClick:()=>o(_.id),children:_.label},_.id))}),n!==null&&n]}),m("div",{className:"tab-content",children:s==null?void 0:s.content})]})}function X({children:t,onClick:e,type:n="button",className:r=""}){return m("button",{type:n,className:`gh-btn ${r}`,onClick:e,children:t})}function tt({value:t,onInput:e,placeholder:n="",type:r="text"}){return m("input",{className:"gh-input",type:r,value:t,onInput:e,placeholder:n})}function nt({title:t,message:e,onConfirm:n,onCancel:r}){return m("div",{className:"modal-overlay",children:m("div",{className:"modal-content",children:[m("h3",{className:"modal-title",children:t}),m("p",{className:"modal-message",children:e}),m("div",{className:"modal-actions",children:[m(X,{onClick:n,children:"Confirm"}),m(X,{variant:"secondary",onClick:r,children:"Cancel"})]})]})})}class A{static formatTime(e,n=0){const r=Math.floor(e+n),o=Math.floor(r/3600),s=Math.floor(r%3600/60),a=Math.floor(r%60);return`${o.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}static timeStringSince(e,n=0){const r=new Date(e);if(isNaN(r.getTime()))return this.formatTime(0,n);const o=Math.floor((Date.now()-r.getTime())/1e3);return this.formatTime(o,n)}static splitSeconds(e){return{minutes:Math.floor(e/60),seconds:Math.floor(e%60)}}}const rt="https://api.github.com",g={GITHUB_TOKEN:"githubToken",ACTIVE_ISSUE:"activeIssue",START_TIME:"startTime",TRACKED_TIMES:"trackedTimes",ISSUES:"issues"},Ge=1e3,ot=t=>`⏱️ Tracked time: **${t}**`;class w{static async get(e){return new Promise(n=>{chrome.storage.local.get(e,r=>n(r[e]||null))})}static async set(e,n){return new Promise(r=>{chrome.storage.local.set({[e]:n},r)})}static async remove(e){return new Promise(n=>{chrome.storage.local.remove(e,n)})}static async getMultiple(e){return new Promise(n=>{chrome.storage.local.get(e,r=>{const o={};for(const s of e)o[s]=r[s]||null;n(o)})})}static async removeMultiple(e){return new Promise(n=>{chrome.storage.local.remove(e,n)})}}class M{static async getGitHubToken(){return w.get(g.GITHUB_TOKEN)}static async setGitHubToken(e){return w.set(g.GITHUB_TOKEN,e)}static async removeGitHubToken(){return w.remove(g.GITHUB_TOKEN)}static async validateGitHubToken(e){try{return(await fetch("https://api.github.com/user",{headers:{Authorization:`token ${e}`}})).ok}catch(n){return console.error("Token validation failed:",n),!1}}}class re{static parseIssueUrl(e){const n=e.match(/^\/([^/]+)\/([^/]+)\/issues\/(\d+)/);if(!n)throw new Error("Invalid GitHub issue URL");return{owner:n[1],repo:n[2],issueNumber:parseInt(n[3],10),fullRepo:`${n[1]}/${n[2]}`}}static async apiRequest(e,n={}){const r=await M.getGitHubToken();if(!r)throw new Error("GitHub token not found");const o=await fetch(`${rt}${e}`,{...n,headers:{Authorization:`token ${r}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json",...n.headers}});if(!o.ok){const s=await o.json();throw new Error(s.message||"GitHub API request failed")}return o.json()}static async getUser(){return this.apiRequest("/user")}static async postComment({owner:e,repo:n,issueNumber:r,seconds:o}){const s=Math.floor(o/60),a=Math.floor(o%60),_=s>0?`${s} min${a>0?` ${a} sec`:""}`:`${a} sec`;return this.apiRequest(`/repos/${e}/${n}/issues/${r}/comments`,{method:"POST",body:JSON.stringify({body:ot(_)})})}}const B=g.ISSUES;class Y{static async getAll(){return await w.get(B)||[]}static async add(e){const n=await this.getAll();n.some(o=>o.url===e.url)||(n.push(e),await w.set(B,n))}static async update(e,n){const o=(await this.getAll()).map(s=>s.url===e?{...s,...n}:s);await w.set(B,o)}static async remove(e){const r=(await this.getAll()).filter(o=>o.url!==e);await w.set(B,r)}static async removeAll(){await w.remove(g.ISSUES)}static async getByUrl(e){return(await this.getAll()).find(r=>r.url===e)||null}static async exists(e){return(await this.getAll()).some(r=>r.url===e)}static async clear(){await w.remove(B)}}class Q{static async getTotalTimeForIssue(e){return(await w.get(g.TRACKED_TIMES)||[]).filter(r=>r.issueUrl===e).reduce((r,o)=>r+(o.seconds||0),0)}static async startTimer(e,n=null){try{const[r,o,s]=await Promise.all([w.get(g.ACTIVE_ISSUE),w.get(g.START_TIME),Y.getByUrl(e)]);r&&o&&r!==e&&(console.log(`Останавливаем таймер для предыдущей задачи: ${r}`),await this.stopTimer(r,n));const a=re.parseIssueUrl(e),{owner:_,repo:u,issueNumber:l}=a,d=this.getIssueTitle()||"Untitled",i=`(${_}) ${u} | ${d} | #${l}`;await Promise.all([w.set(g.ACTIVE_ISSUE,e),w.set(g.START_TIME,new Date().toISOString())]),s||await Y.add({url:e,title:i});const f=await this.getTotalTimeForIssue(e);let c=null;return n&&(n.textContent=`${A.formatTime(0,f)} ⏸ Stop`,c=window.setInterval(async()=>{const h=await w.get(g.START_TIME);if(!h||isNaN(new Date(h).getTime())){clearInterval(c),n.textContent=`${A.formatTime(0,f)} Start Timer`;return}n.textContent=`${A.timeStringSince(h,f)} ⏸ Stop`},Ge),n.dataset.intervalId=c.toString()),{issueUrl:e,totalTime:f,intervalId:c,isRunning:!0}}catch(r){return console.error("Не удалось запустить таймер:",r),n!=null&&n.dataset.intervalId&&(clearInterval(parseInt(n.dataset.intervalId,10)),n.textContent="Start Timer"),await w.removeMultiple([g.ACTIVE_ISSUE,g.START_TIME]),{issueUrl:e,totalTime:0,intervalId:null,isRunning:!1}}}static async stopTimer(e,n=null){try{const[r,o,s,a]=await Promise.all([w.get(g.START_TIME),M.getGitHubToken(),w.get(g.TRACKED_TIMES),Y.getByUrl(e)]);if(!r||isNaN(new Date(r).getTime()))return console.error("Некорректное startTime:",r),this.resetButtonState(n),await w.removeMultiple([g.ACTIVE_ISSUE,g.START_TIME]),{issueUrl:e,totalTime:0,isRunning:!1};const _=(a==null?void 0:a.title)||"Untitled",u=Math.floor((Date.now()-new Date(r).getTime())/1e3),l=re.parseIssueUrl(e),{owner:d,repo:i,issueNumber:f}=l;if(o)try{await re.postComment({owner:d,repo:i,issueNumber:f,seconds:u})}catch(p){console.error("Не удалось отправить комментарий:",p)}const c=[...s||[],{issueUrl:e,title:_,seconds:u,date:new Date().toISOString().slice(0,10)}];await Promise.all([w.set(g.TRACKED_TIMES,c),w.removeMultiple([g.ACTIVE_ISSUE,g.START_TIME])]);const h=await this.getTotalTimeForIssue(e);return this.resetButtonState(n,h),{issueUrl:e,totalTime:h,isRunning:!1}}catch(r){return console.error("Не удалось остановить таймер:",r),this.resetButtonState(n),{issueUrl:e,totalTime:0,isRunning:!1}}}static getIssueTitle(){var e,n,r,o;return((n=(e=document.querySelector("span.js-issue-title"))==null?void 0:e.textContent)==null?void 0:n.trim())||((o=(r=document.querySelector("[data-testid='issue-title']"))==null?void 0:r.textContent)==null?void 0:o.trim())||null}static resetButtonState(e,n=0){e!=null&&e.dataset.intervalId&&(clearInterval(parseInt(e.dataset.intervalId,10)),delete e.dataset.intervalId),e&&(e.textContent=`${A.formatTime(0,n)} Start Timer`)}}function Ve({entries:t,showTimerControls:e=!1}){const[n,r]=C(null),[o,s]=C(null),[a,_]=C({});x(()=>{(async()=>{const[i,f]=await Promise.all([w.get(g.ACTIVE_ISSUE),w.get(g.START_TIME)]);if(r(i),s(f),i&&f&&!isNaN(new Date(f).getTime())){const c=(Date.now()-new Date(f).getTime())/1e3;_(h=>({...h,[i]:A.formatTime(c)}))}})();const d=i=>{i[g.ACTIVE_ISSUE]&&r(i[g.ACTIVE_ISSUE].newValue),i[g.START_TIME]&&s(i[g.START_TIME].newValue)};return chrome.storage.local.onChanged.addListener(d),()=>{chrome.storage.local.onChanged.removeListener(d)}},[]),x(()=>{if(!e)return;const l=async()=>{if(!n||!o||isNaN(new Date(o).getTime())){_(f=>{const c={...f};return delete c[n],c});return}return setInterval(()=>{const f=(Date.now()-new Date(o).getTime())/1e3;_(c=>({...c,[n]:A.formatTime(f)}))},Ge)};let d;return l().then(i=>{d=i}),()=>{d&&clearInterval(d)}},[n,o,e]);const u=async l=>{console.log("handleTimerClick:",l.issueUrl,"action:",l.issueUrl===n?"stop":"start"),console.log("entry",l),l.issueUrl===n&&o&&!isNaN(new Date(o).getTime())?(await Q.stopTimer(l.issueUrl,null,l.title),_(d=>{const i={...d};return delete i[l.issueUrl],i}),chrome.runtime.sendMessage({action:"timerStopped",issueUrl:l.issueUrl})):(await Q.startTimer(l.issueUrl),chrome.runtime.sendMessage({action:"timerStarted",issueUrl:l.issueUrl}))};return m("div",{className:"tracked-list",children:t.map((l,d)=>m("div",{className:"tracked-entry",children:[m("div",{className:"tracked-title",children:l.title}),m("div",{className:"tracked-meta",children:[l.displayTime," ",l.date&&`on ${l.date}`," |"," ",m("a",{href:`https://github.com${l.issueUrl}`,target:"_blank",children:"View"}),e&&m(D,{children:[" | ",m("span",{onClick:()=>u(l),className:"startTrackingBtn",children:l.issueUrl===n&&o&&!isNaN(new Date(o).getTime())?`${a[l.issueUrl]||"00:00:00"} Stop`:"Start"})]})]})]},l.issueUrl||d))})}function Fe({onSearch:t}){const[e,n]=C("");return m("div",{className:"search-bar",children:m("input",{type:"text",placeholder:"Search tasks...",value:e,onInput:o=>{const s=o.target.value;n(s),t(s)}})})}function st({tracked:t}){const[e,n]=C(null),[r,o]=C(null),[s,a]=C({}),[_,u]=C("");x(()=>{(async()=>{const[p,y]=await Promise.all([w.get(g.ACTIVE_ISSUE),w.get(g.START_TIME)]);if(n(p),o(y),p&&y&&!isNaN(new Date(y).getTime())){const T=await Q.getTotalTimeForIssue(p),v=(Date.now()-new Date(y).getTime())/1e3;a(b=>({...b,[p]:A.formatTime(v+T)}))}})();const h=p=>{p[g.ACTIVE_ISSUE]&&n(p[g.ACTIVE_ISSUE].newValue),p[g.START_TIME]&&o(p[g.START_TIME].newValue)};return chrome.storage.local.onChanged.addListener(h),()=>{chrome.storage.local.onChanged.removeListener(h)}},[]),x(()=>{if(!e||!r||isNaN(new Date(r).getTime())){a(p=>{const y={...p};return delete y[e],y});return}const c=async()=>{const p=await Q.getTotalTimeForIssue(e);return setInterval(()=>{const T=(Date.now()-new Date(r).getTime())/1e3;a(v=>({...v,[e]:A.formatTime(T+p)}))},1e3)};let h;return c().then(p=>{h=p}),()=>{h&&clearInterval(h)}},[e,r]);const l=G(()=>{console.log("Calculating todayTotalTime, tracked:",t);const c=new Date;c.setHours(0,0,0,0);const h=new Date(c);h.setDate(c.getDate()+1);const p=t.reduce((y,T)=>{console.log("Processing entry:",T);const v=new Date(T.date);return isNaN(v.getTime())?(console.warn("Invalid date for entry:",T),y):v>=c&&v<h?(console.log("Entry included:",T.seconds,"seconds"),y+(T.seconds||0)):y},0);return console.log("Total seconds today:",p),A.formatTime(p)},[t]),d=c=>{u(c)},i=G(()=>t.filter(c=>c.title.toLowerCase().includes(_.toLowerCase())||c.issueUrl.toLowerCase().includes(_.toLowerCase())),[t,_]),f=G(()=>{const c=i.reduce((h,p)=>(h[p.issueUrl]||(h[p.issueUrl]={title:p.title,seconds:0,issueUrl:p.issueUrl}),h[p.issueUrl].seconds+=p.seconds,h),{});return Object.values(c).map(h=>({...h,displayTime:h.issueUrl===e&&s[h.issueUrl]?s[h.issueUrl]:A.formatTime(h.seconds)}))},[i,s,e]);return m(D,{children:[m("div",{className:"today-total-time",children:["Total time tracked today: ",l]}),m(Fe,{onSearch:d}),m(Ve,{entries:f,showTimerControls:!0})]})}function it({tracked:t}){const[e,n]=C(""),r=a=>{n(a)},o=G(()=>t.filter(a=>a.title.toLowerCase().includes(e.toLowerCase())||a.issueUrl&&a.issueUrl.toLowerCase().includes(e.toLowerCase())),[t,e]),s=G(()=>o.slice(-10).reverse().map(a=>({...a,displayTime:A.formatTime(a.seconds)})),[o]);return m(D,{children:[m(Fe,{onSearch:r}),m(Ve,{entries:s})]})}function at(t,e=null){const[n,r]=C(e);return x(()=>{(async()=>{const a=await w.get(t)||e;r(a)})();const s=(a,_)=>{_==="local"&&a[t]&&r(a[t].newValue||e)};return chrome.storage.onChanged.addListener(s),()=>chrome.storage.onChanged.removeListener(s)},[t,e]),n}function lt(){const t="no token",[e,n]=C(""),[r,o]=C(!1),[s,a]=C(t),[_,u]=C(null),[l,d]=C(!1),i=at(g.TRACKED_TIMES,[]);x(()=>{(async()=>{const E=await M.getGitHubToken();E&&(n(E),a(E.slice(0,4)+"••••••••"))})()},[]);const f=async()=>{await M.validateGitHubToken(e)?(await M.setGitHubToken(e),a(e.slice(0,4)+"••••••••"),o(!1),u(null)):u({type:"error",message:"Invalid token"})},c=()=>{o(!0)},h=()=>{o(!1),u(null)},p=async()=>{await M.removeGitHubToken(),a(t),n("")},y=()=>{d(!0)},T=async()=>{try{await w.remove(g.TRACKED_TIMES),await Y.removeAll(),d(!1)}catch(b){console.error("Failed to clear tracked times:",b),d(!1),alert("Failed to clear tracked times. Please try again.")}},v=()=>{d(!1)};return m("div",{className:"popup",children:[m("h2",{children:"⏱️ GitHub Time Tracker"}),r?m("div",{style:{marginBottom:"15px",marginTop:"15px"},children:[m(tt,{type:"password",value:e,onInput:b=>n(b.target.value),placeholder:"GitHub Token"}),_&&_.type==="error"&&m("span",{style:{color:"red",marginBottom:"10px",display:"inline-block"},children:_.message}),m("div",{style:{display:"flex",gap:"10px"},children:[m(X,{onClick:f,children:"Save Token"}),m(X,{variant:"secondary",onClick:h,children:"Cancel"})]})]}):m("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px",marginTop:"15px"},children:[m("span",{style:{fontSize:"0.9em",color:"#555"},children:[e?"✅":"❌"," Token: ",s]}),m("div",{children:[e&&m("span",{style:{marginRight:"10px",cursor:"pointer"},onClick:p,children:"Remove"}),m("span",{onClick:c,style:{color:"#007bff",cursor:"pointer",textDecoration:"underline"},children:"Change"})]})]}),i.length>0&&m("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:m("div",{style:{flex:1},children:m(et,{tabs:[{id:"summary",label:"Summary",content:m(st,{tracked:i})},{id:"history",label:"History",content:m(it,{tracked:i})}],tabsHeaderRight:m("div",{onClick:y,className:"clearTrackedTimesBtn",children:"Clear"})})})}),l&&m(nt,{title:"Confirm Clear",message:"Are you sure you want to clear all tracked times? This action cannot be undone.",onConfirm:T,onCancel:v})]})}console.log("popup.jsx loaded!");Ye(m(lt,{}),document.getElementById("root"));
